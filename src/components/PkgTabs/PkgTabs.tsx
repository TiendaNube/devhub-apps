import React from "react";
import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from "@theme/CodeBlock";

const images: Record<string, string> = {
  npm: "data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2032%2032'%3E%3Cpath%20fill='%23cb3837'%20d='M2%2010.555h28v9.335H16v1.556H9.778v-1.557H2Zm1.556%207.779h3.111v-4.668h1.555v4.667h1.556v-6.222H3.556Zm7.778-6.223v7.779h3.111v-1.556h3.111v-6.223Zm3.111%201.556H16v3.112h-1.556Zm4.667-1.556v6.223h3.111v-4.668h1.556v4.667h1.556v-4.667h1.556v4.667h1.556v-6.222Z'/%3E%3C/svg%3E",
  yarn: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' viewBox='0 0 32 32'%3E%3Cpath fill='%232188b6' d='M28.208 24.409a10.5 10.5 0 0 0-3.959 1.822a23.7 23.7 0 0 1-5.835 2.642a1.63 1.63 0 0 1-.983.55a62 62 0 0 1-6.447.577c-1.163.009-1.876-.3-2.074-.776a1.573 1.573 0 0 1 .866-2.074a4 4 0 0 1-.514-.379c-.171-.171-.352-.514-.406-.388c-.225.55-.343 1.894-.947 2.5c-.83.839-2.4.559-3.328.072c-1.019-.541.072-1.813.072-1.813a.73.73 0 0 1-.992-.343a4.85 4.85 0 0 1-.667-2.949a5.37 5.37 0 0 1 1.749-2.895a9.3 9.3 0 0 1 .658-4.4a10.45 10.45 0 0 1 3.165-3.661S6.628 10.747 7.35 8.817c.469-1.262.658-1.253.812-1.308a3.6 3.6 0 0 0 1.452-.857a5.27 5.27 0 0 1 4.41-1.7S15.2 1.4 16.277 2.09a18.4 18.4 0 0 1 1.533 2.886s1.281-.748 1.425-.469a11.33 11.33 0 0 1 .523 6.132a14 14 0 0 1-2.6 5.411c-.135.225 1.551.938 2.615 3.887c.983 2.7.108 4.96.262 5.212c.027.045.036.063.036.063s1.127.09 3.391-1.308a8.5 8.5 0 0 1 4.277-1.604a1.081 1.081 0 0 1 .469 2.11Z'/%3E%3C/svg%3E",
  pnpm: "data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2032%2032'%3E%3Cpath%20fill='%23f9ad00'%20d='M30%2010.75h-8.749V2H30Zm-9.626%200h-8.75V2h8.75Zm-9.625%200H2V2h8.749ZM30%2020.375h-8.749v-8.75H30Z'/%3E%3Cpath%20fill='%234e4e4e'%20d='M20.374%2020.375h-8.75v-8.75h8.75Zm0%209.625h-8.75v-8.75h8.75ZM30%2030h-8.749v-8.75H30Zm-19.251%200H2v-8.75h8.749Z'/%3E%3C/svg%3E",
  bun: "data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2032%2032'%3E%3Cpath%20fill='%23fbf0df'%20d='M29%2017c0%205.65-5.82%2010.23-13%2010.23S3%2022.61%203%2017c0-3.5%202.24-6.6%205.66-8.44S14.21%204.81%2016%204.81s3.32%201.54%207.34%203.71C26.76%2010.36%2029%2013.46%2029%2017'/%3E%3Cpath%20fill='none'%20stroke='%23000'%20d='M16%2027.65c7.32%200%2013.46-4.65%2013.46-10.65c0-3.72-2.37-7-5.89-8.85c-1.39-.75-2.46-1.41-3.37-2l-1.13-.69A6.14%206.14%200%200%200%2016%204.35a6.9%206.9%200%200%200-3.3%201.23c-.42.24-.86.51-1.32.8c-.87.54-1.83%201.13-3%201.73C4.91%2010%202.54%2013.24%202.54%2017c0%206%206.14%2010.65%2013.46%2010.65Z'/%3E%3Cellipse%20cx='21.65'%20cy='18.62'%20fill='%23febbd0'%20rx='2.17'%20ry='1.28'/%3E%3Cellipse%20cx='10.41'%20cy='18.62'%20fill='%23febbd0'%20rx='2.17'%20ry='1.28'/%3E%3Cpath%20fill-rule='evenodd'%20d='M11.43%2018.11a2%202%200%201%200-2-2.05a2.05%202.05%200%200%200%202%202.05m9.2%200a2%202%200%201%200-2-2.05a2%202%200%200%200%202%202.05'/%3E%3Cpath%20fill='%23fff'%20fill-rule='evenodd'%20d='M10.79%2016.19a.77.77%200%201%200-.76-.77a.76.76%200%200%200%20.76.77m9.2%200a.77.77%200%201%200%200-1.53a.77.77%200%200%200%200%201.53'/%3E%3Cpath%20fill='%23b71422'%20stroke='%23000'%20stroke-width='.75'%20d='M18.62%2019.67a3.3%203.3%200%200%201-1.09%201.75a2.48%202.48%200%200%201-1.5.69a2.53%202.53%200%200%201-1.5-.69a3.28%203.28%200%200%201-1.08-1.75a.26.26%200%200%201%20.29-.3h4.58a.27.27%200%200%201%20.3.3Z'/%3E%3Cpath%20fill='%23ccbea7'%20fill-rule='evenodd'%20d='M14.93%205.75a6.1%206.1%200%200%201-2.09%204.62c-.1.09%200%20.27.11.22c1.25-.49%202.94-1.94%202.23-4.88c-.03-.15-.25-.11-.25.04m.85%200a6%206%200%200%201%20.57%205c0%20.13.12.24.21.13c.83-1%201.54-3.11-.59-5.31c-.1-.11-.27.04-.19.17Zm1-.06a6.1%206.1%200%200%201%202.53%204.38c0%20.14.21.17.24%200c.34-1.3.15-3.51-2.66-4.66c-.12-.02-.21.18-.09.27ZM9.94%209.55a6.27%206.27%200%200%200%203.89-3.33c.07-.13.28-.08.25.07c-.64%203-2.79%203.59-4.13%203.51c-.14-.01-.14-.21-.01-.25'/%3E%3C/svg%3E",
};

interface PkgTabsItemProps {
  value: string;
  command: string;
  children?: React.ReactNode;
}

function Item({ children }: { children: React.ReactNode }) {
  return <>{children}</>;
}

interface PkgTabsProps {
  children: React.ReactNode;
}

function PkgTabs({ children }: PkgTabsProps) {
  return (
    <Tabs>
      {React.Children.map(children, (child) => {
        if (!React.isValidElement<PkgTabsItemProps>(child)) return null;

        const { value, command } = child.props;

        return (
          <TabItem
            value={value}
            label={
              <>
                <img
                  src={images[value.toLowerCase()]}
                  alt={`${value} icon`}
                  style={{ marginRight: "4px" }}
                />
                {value}
              </> as any
            }
          >
            <CodeBlock metastring={value} language="bash">
              {command}
            </CodeBlock>
          </TabItem>
        );
      })}
    </Tabs>
  );
}

PkgTabs.Item = Item;

export default PkgTabs;
